!function(d){"use strict";welaunch.field_objects=welaunch.field_objects||{},welaunch.field_objects.image_select=welaunch.field_objects.image_select||{},welaunch.field_objects.image_select.init=function(e){e=d.welaunch.getSelector(e,"image_select"),d(e).each(function(){var r=d(this),e=r;r.hasClass("welaunch-field-container")||(e=r.parents(".welaunch-field-container:first")),e.is(":hidden")||e.hasClass("welaunch-field-init")&&(e.removeClass("welaunch-field-init"),r.find(".welaunch-image-select label img, .welaunch-image-select label .tiles").click(function(e){var t,i,s,l,a=d(this).closest("label").attr("for");if(d(this).parents("fieldset:first").find(".welaunch-image-select-selected").removeClass("welaunch-image-select-selected").find('input[type="radio"]').prop("checked",!1),d(this).closest("label").find('input[type="radio"]').prop("checked"),d(this).closest("label").hasClass("welaunch-image-select-preset-"+a))return e.preventDefault(),t=d(this).closest("label").find("input"),i=t.data("presets"),null!=(s=t.data("merge"))&&("string"===d.type(s)&&(s=s.split("|")),d.each(i,function(e){"object"!==d.type(welaunch.optName.options[e])||!0!==s&&-1===d.inArray(e,s)||(i[e]=d.extend(welaunch.optName.options[e],i[e]))})),null!=t&&(r.find('label[for="'+a+'"]').addClass("welaunch-image-select-selected").find('input[type="radio"]').attr("checked",!0),window.onbeforeunload=null,0===(l=d('textarea[name="'+welaunch.optName.args.opt_name+'[import_code]"')).length?d(this).append('<textarea id="import-code-value" style="display:none;" name="'+welaunch.optName.args.opt_name+'[import_code]">'+JSON.stringify(i)+"</textarea>"):l.val(JSON.stringify(i)),0!==d("#publishing-action #publish").length?d("#publish").click():d("#welaunch-import").click()),!1;r.find('label[for="'+a+'"]').addClass("welaunch-image-select-selected").find('input[type="radio"]').prop("checked",!0).trigger("change"),welaunch_change(d(this).closest("label").find('input[type="radio"]'))}),r.find(".tiles").qtip({content:{text:function(){return'<img src="'+d(this).attr("rel")+'" style="max-width:150px;" alt=" />'}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))})}}(jQuery);