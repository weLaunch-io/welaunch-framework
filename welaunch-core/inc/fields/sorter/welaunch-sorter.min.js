!function(s){"use strict";var i="";welaunch.field_objects=welaunch.field_objects||{},welaunch.field_objects.sorter=welaunch.field_objects.sorter||{},welaunch.field_objects.sorter.init=function(e){e=s.welaunch.getSelector(e,"sorter"),s(e).each(function(){var t=s(this),e=t;t.hasClass("welaunch-field-container")||(e=t.parents(".welaunch-field-container:first")),e.is(":hidden")||e.hasClass("welaunch-field-init")&&(e.removeClass("welaunch-field-init"),t.find(".welaunch-sorter").each(function(){var e=s(this).attr("id");t.find("#"+e).find("ul").sortable({items:"li",placeholder:"placeholder",connectWith:".sortlist_"+e,opacity:.8,scroll:!1,out:function(e,t){t.helper&&(i=0<t.offset.top?"down":"up",welaunch.field_objects.sorter.scrolling(s(this).parents(".welaunch-field-container:first")))},over:function(){i=""},deactivate:function(){i=""},stop:function(e,t){var i=welaunch.optName.sorter[s(this).attr("data-id")],r=s(this).find("h3").text();i.limits&&r&&i.limits[r]&&(s(this).children("li").length>=i.limits[r]?(s(this).addClass("filled"),s(this).children("li").length>i.limits[r]&&s(t.sender).sortable("cancel")):s(this).removeClass("filled"))},update:function(e,t){var i=welaunch.optName.sorter[s(this).attr("data-id")],r=s(this).find("h3").text();i.limits&&r&&i.limits[r]&&(s(this).children("li").length>=i.limits[r]?(s(this).addClass("filled"),s(this).children("li").length>i.limits[r]&&s(t.sender).sortable("cancel")):s(this).removeClass("filled")),s(this).find(".position").each(function(){var e,t=s(this).parent().attr("data-id"),i=s(this).parent().parent().attr("data-group-id");welaunch_change(s(this)),e=s(this).parent().parent().parent().attr("id"),s(this).prop("name",welaunch.optName.args.opt_name+"["+e+"]["+i+"]["+t+"]")})}}),t.find(".welaunch-sorter").disableSelection()}))})},welaunch.field_objects.sorter.scrolling=function(e){var t;void 0!==e&&(t=e.find(".welaunch-sorter"),"up"===i?(t.scrollTop(t.scrollTop()-20),setTimeout(welaunch.field_objects.sorter.scrolling,50)):"down"===i&&(t.scrollTop(t.scrollTop()+20),setTimeout(welaunch.field_objects.sorter.scrolling,50)))}}(jQuery);