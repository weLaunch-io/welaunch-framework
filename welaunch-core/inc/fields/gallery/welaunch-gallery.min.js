!function(s){"use strict";welaunch.field_objects=welaunch.field_objects||{},welaunch.field_objects.gallery=welaunch.field_objects.gallery||{},welaunch.field_objects.gallery.init=function(e){e=s.welaunch.getSelector(e,"gallery"),s(e).each(function(){var e=s(this),i=e;e.hasClass("welaunch-field-container")||(i=e.parents(".welaunch-field-container:first")),i.is(":hidden")||i.hasClass("welaunch-field-init")&&(i.removeClass("welaunch-field-init"),e.on({click:function(e){var t,i,l,n,a,d,r;return wp.media.view.Settings.Gallery=wp.media.view.Settings.Gallery.extend({template:function(){}}),t=s(this).closest("fieldset"),"clear-gallery"===e.currentTarget.id?(t.find(".gallery_values").val(""),void t.find(".screenshot").html("")):"undefined"!=typeof wp&&wp.media&&wp.media.gallery?(e.preventDefault(),i=(l=t.find(".gallery_values").val())?'[gallery ids="'+l+'"]':'[gallery ids="0"]',n=wp.media.gallery.edit(i),l||(a=s("body").find("#"+n.el.id),r=a.find(".uploader-inline"),d=a.find(".media-toolbar .spinner"),setTimeout(function(){r.hasClass("hidden")&&(r.removeClass("hidden"),d.removeClass("is-active"))},400)),n.state("gallery-edit").on("update",function(e){var i,l,a,d;t.find(".screenshot").html(""),i=e.models.map(function(e){return l=e.toJSON(),a=void 0!==l.sizes&&void 0!==l.sizes.thumbnail?l.sizes.thumbnail.url:l.url,d='<a class="of-uploaded-image" href="'+a+'"><img class="welaunch-option-image" src="'+a+'" alt="" /></a>',t.find(".screenshot").append(d),e.id}),t.find(".gallery_values").val(i.join(",")),welaunch_change(t.find(".gallery_values")),n.detach()}),!1):void 0}},".gallery-attachments"))})}}(jQuery);